% ビザンチン合意を用いた計算可能な複雑系としての社会契約
% - [x] 社会契約とは
% - [x] スタグハントゲーム
% - [x] 機能主義的なアプローチ
% - [x] 交渉ゲーム理論を用いたアプローチ
% - [x] 進化ゲーム理論を用いたアプローチ
% - [x] 限定合理性
% - [x] 強制執行力
% - [ ] 外部の強制執行力
% - [ ] 複雑系
% - [ ] 自己組織化
% - [x] ビザンチン将軍問題
% - [x] 署名されたメッセージによる解決策
% - [x] マルチエージェントシミュレーション

% 道徳的な機能とは何か？
% どのような解にたどり着くのか？
% どのようなプロセスで解にたどり着くのか？
% どのような振る舞いでプロセスが成立するのか？

\chapter{背景}
\section{社会契約とは}
社会契約とは、ある集団において、「各成員に合意された約束の履行を強制する力」を生じさせるプロセスである。
中世において、社会契約はホッブズやロック、ルソーによって議論され、
なぜ国家において国民が法に従うのかを論理的に説明しようと試みることで
王権神授説を否定する主張として注目された。
現代においては、ロールズやハーサニーが中世の社会契約論の一般化を試み、
その社会契約のプロセスの果に導きだされる公正な正義とはどういったものかを議論した。
それ以降、社会契約は倫理や正義論といった概念とともに、ゲーム理論を用いて分析されるようになり、
機能主義、交渉理論、進化ゲーム理論の3つのアプローチがなされている。\cite{sep-game-ethics}

\section{スタグハントゲーム}
\input{02_background/stag-hunt-table.tex}
スタグハントゲームとは、ルソーの「人類不平等起源論」\cite{rousseau1999discourse}に登場する「鹿狩りの寓話」をモデリングした非協力戦略型ゲームである。\cite{skyrms2001}
二人のハンターが協力して鹿を狩るか、相手を裏切って野兎を狩るかを選択するが、
鹿は２人で協力しなければ狩ることができず、1人だけで狩ろうとすると何も得ることができない。
このゲームは代表的な囚人のジレンマゲームであり、非協力解(両者が野兎を狩る戦略をとる解)がナッシュ均衡になることが知られている。
こうした囚人のジレンマゲームは社会契約が成立する原理を説明する鍵だと考えられている。\cite{skyrms2001}

\section{機能主義的なアプローチ}
Edna Ullmann-Margalitは、同様の囚人のジレンマゲームを持ち出し、
道徳的な規範がプレイヤーが、自己利得の最大化のために非協力解に陥ることを妨げていることを説明した。\cite{edna1977emergence}
Mackieの研究においても、同様に、道徳の機能は合理性の失敗を防ぐことにあるとされる。\cite{machie1977ethics}
しかしながら、こうしたアプローチは道徳的な規範の機能を説明する一方で、
なぜプレイヤーがその規範に従うのかについては説明がなされていない。

\section{交渉理論を用いたアプローチ}
\label{bargaining-theory}
交渉ゲーム理論を用いたアプローチとしては、Harsanyi 1955\cite{harsanyi1955}や
Rawls 1971\cite{rawls1971}、Gauthier 1986\cite{gauthier1986}などが挙げられる。
彼らは道徳的な規範に基づいた解も合理的な戦略決定によって生じていると考え、
交渉ゲーム理論を用いて、どのような協力解が選択されるのかを説明しようした。
しかしながら、こうしたアプローチは、選択可能な社会契約の集合から、
それぞれの交渉解の要件に沿った社会契約を選択されるのかを解明しようとするものであり、
具体的にどういったプロセスでその解に至るのかはわからない。
% 交渉解も様々な種類のものが存在していてそれが一般に言えるとは限らない。

\section{進化ゲーム理論を用いたアプローチ}
\label{evolutionary-game-theory}
進化ゲーム理論を用いたアプローチは、道徳的な規範がどのようなプロセスで出現し維持されるのかを解明しようとしてる。
複数の研究で\cite{sugden1986}\cite{binmore1994}\cite{binmore1998}\cite{skyrms1996}
限定合理的なエージェントの間でも道徳的な規範が出現することが示されており、
こうした規範は相互作用の繰り返しの中で主体の行動の意図しない副作用として生じるものだと考察されている。
それゆえ、安定した規範が必ずしもパレート効率だとは限らず、
交渉ゲーム理論を用いたアプローチが仮定しているような効率性と道徳性の関係は存在しないといえる。\cite{sep-game-ethics}

\section{限定合理性}
進化ゲーム理論においては、限定合理性が仮定された上で議論が進められる。
限定合理性とは、意思決定主体が認知能力の限界によって限定された合理性しか発揮することができない性質である。\cite{simon1947}
ゲーム理論においては、「自己利得を最大化する合理的なプレイヤー」という仮定の上では説明が困難だった実社会の協力的な行動を解明するために用いられている。\cite{sep-bounded-rationality}
最後通牒ゲームの実験は、その最もたる例であり、実社会のプレイヤーは相手よりも少ない取り分を提示されると自身の利得が0になるにも関わらず報復的な戦略を選んでいた。\cite{GUTH1982367}

\section{強制執行力}
これまでの社会契約の研究では、強制執行力と呼ばれる「合意された利得の分配を強制的に執り行っている力」の存在が暗黙的に仮定されている。
先に紹介したスタグハントゲームでいうところの、二人で協力して鹿を狩った場合にその鹿を二人で分け合うという取り決めを守らせている力である。
Rawlsの「自然の義務」\cite{rawls1971}やHarsanyiの「道徳的コミットメント」\cite{harsanyi1955}などがこれに当たるとされる。\cite{binmore2005}

\section{外部の強制執行力}
強制執行力のうち、集団の外部の機関によってもたらされる力を外部の強制執行力と呼ぶ。
外部の強制執行力が存在する場合、そこには別の社会契約が存在していることになる。
Binmoreは交渉ゲーム理論と進化ゲーム理論を用いてこの外部の強制執行力が存在する場合と存在しない場合の社会契約について分析し、下記のような結論を導き出した。\cite{binmore2005}

\begin{description}
  \item 外部の強制執行力が存在する場合、合理的なプレイヤーが合意する可能性のある契約はどれも無限回の繰り返しゲームの均衡結果となり得る。
  \item 外部の強制執行力が存在しない場合、過去の歴史が決定する社会指標を利用した平等主義的(ロールズ的)交渉解によって解決される。 
\end{description}


\section{複雑系}
複雑系とは相互に作用し合う可能性のある複数の要素によって構成されるシステムである。
複雑系において、システム全体としての振る舞いは各構成要素の振る舞いによって決定論的に決まるが、
その関係性が非線形的であり些細なパラメーターの変化で結果が大きく異なってしまうため、
個々の振る舞いから全体の挙動を予測することは困難である。
還元主義的なアプローチはシステム全体の振る舞いをシステムを分解することで理解しようとするのに対し、
複雑系のアプローチは構成要素の振る舞いの変化とそれに伴うシステム全体の振る舞いの変化を観察することで理解しようとする。

本論では、社会契約を成立させようとする集団を、成員によって構成される複雑系として捉え、
彼らの振る舞いの変化が社会契約の成立にどのように影響をもたらすのかを解析する。

\section{自己組織化}
自己組織化とは、複雑系において、システム全体を俯瞰できない構成要素の振る舞いによって、全体として秩序だった振る舞いがなされる現象である。
\ref{evolutionary-game-theory}節で述べたような道徳的な規範が生じる現象は、まさにこの自己組織化の例である。
本論では、強制執行力を社会契約の複雑系の中で自己組織化された現象として設計する。
設計にあたっては次節で紹介するビザンチン将軍問題とその解決策を用いる。

\section{ビザンチン将軍問題}
ビザンチン将軍問題とは、分散システムの構成し相互に通信しあうノード群において、
それぞれのノードが本体の故障または故意によって偽の情報を伝達したり何も情報を伝達しない可能性がある場合に、
全ての正常なノードが単一の値を共有することができるかを問う問題である。\cite{lamport1982}
名称の通り、ビザンチン帝国の将軍たちが司令を共有する問題として記述されており、具体的には次のようなものである。

ビザンチン帝国の将軍たちが１つの都市を包囲しており、「攻撃」か「撤退」か合意したいと考えている。
一部の将軍たちは「攻撃」を提案し、他は「撤退」を提案するかもしれないが、一部の将軍だけで攻撃すると失敗してしまう。
将軍たちは、それぞれ離れた場所にいるため、メッセンジャーを相互に送って自分の司令を伝えようとするが、
全ての将軍が誠実とは限らず、中には裏切り者もいて意見を分断させようとするかもしれない。
ここで自身の司令(「攻撃」か「撤退」)を伝えようとしている将軍を司令官、他の全ての将軍を副官としたとき、
IC1とIC2を同時に達成する方法はあるだろうか。

\begin{itemize}
  \item[IC1.] すべての誠実な副官は同じ司令に従う。
  \item[IC2.] 司令官が誠実な場合、全ての誠実な副官は彼の送った司令に従う。
\end{itemize}

\section{署名されたメッセージによる解決策}
この問題にはいくつかの解決策が存在しているが、
ここでは問題が提起されたの論文の中で取り上げられている「署名されたメッセージによる解決策」を紹介する。
それによれば、裏切り者の人数を$m$としたとき、A1〜A5の5つの仮定の上で、
$m+1$人以上の将軍がいれば下記のアルゴリズムでIC1とIC2を同時に満たせることが証明されている。
将軍の人数を$n$としたとき、$i \in \{1,...,n-1\}$であり、$lineutenant_i$は$i$番目の将軍を指す。
任意の値$w$に対して、$w:i$は$i$番目の将軍によって署名がついた値である。$w:0$の場合は司令官の将軍の署名がついた値を指す。

\subsection{仮定}
\begin{itemize}
  \item[A1] 送信されたすべてのメッセージは正しく到達する
  \item[A2] メッセージの受信者は誰が送信したのかわかる
  \item[A3] メッセージが届かないことを検知できる
  \item[A4] 誠実な将軍の署名は偽造できず、署名されたメッセージの内容が変更されても、それを検知することができる。
  \item[A5] 誰でも将軍の署名の信憑性を検証することができる。
\end{itemize}

\subsection{関数 $choice(V)$}
関数$choice(V)$は集合$V$を引数にとって司令(「攻撃」か「撤退」)を返す関数である。
\begin{enumerate}
  \item[1.] もし集合に単一の司令$v$しか存在しなければ、$choice(V) = v$とする。
  \item[2.] $choice(\emptyset) = RETREAT$とする。$\emptyset$は空集合。
  \item[3.] もとの論文で抜けてるけど、$V$が２つあるときは$RETREAT$?
\end{enumerate}

\subsection{アルゴリズム $SM(m)$}
\begin{enumerate}
  \item $V_i=\emptyset$として初期化する。($\emptyset$は空集合)
  \item 司令官は彼の値を全ての副官に署名して送る。
  \item 各$i$について、 
  \begin{enumerate}
    \item もし$lineutenant_i$が$v:0$という形式のメッセージを受け取り、まだ何の命令も受けていない場合は、
    \begin{enumerate}
      \item $lineutenant_i$は$ V_i$を${v}$にする。 
      \item $lineutenant_i$は他のすべての中尉にメッセージ$v:0:i$を送ります。
    \end{enumerate}
    \item もし$lieutenant_i$が$v:0:j_1:...:j_k$という形式のメッセージを受け取り、$v$が集合$V_i$に入っていない場合は
    \begin{enumerate}
      \item $lieutenant_i$は$v$を$V_i$に追加する。
      \item もし$k<m$であれば、$lieutenant_i$は$j_1, ..., j_k$以外のすべての副官に$v:0:j_1:...:j_k:i$というメッセージを送る。
    \end{enumerate}
  \end{enumerate}
  \item 各$i$について。$lineutenant_i$がこれ以上メッセージを受け取らない場合、$lieutenant_i$は命令$choice(V_i)$に従う。
\end{enumerate}

\section{マルチエージェントシミュレーション}
マルチエージェントシミュレーションとは、
与えられた方策に従って振る舞う複数のエージェントとそのエージェント達を内包する環境を定義し、
計算機によって、それらのエージェントの振る舞いをシミュレーションすることで、
エージェント達の振る舞いによってもたらされる相互作用を観察する手法である。
本論では、分散システムとして設計されたシステムの検証のために用いる。

